# Такие постоянные переменные

Давайте вспомним нашу программу из прошлого урока

```kotlin
fun main() {
    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже 18!")
}
```

И немного ее переработаем, чтобы получилось следующее

```kotlin
fun main() {
    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже 18!")
    println("18 - самый прекрасный возраст.")
}
```

Допустим, мы отправили это сообщение в этом году, все хорошо. Затем прошел год и у Вики опять день рождения. Из-за того, что у Вики плохая
память, мы решаем особо ничего не придумывать, а просто заменить `18` на `19` и отправить наше прошлогоднее поздравление. Итак, нам надо
исправить текст в 2-х местах. "Ничего страшного", - скажете вы, "займет не более 10 секунд" и будете абсолютно правы. Но что, если мы
отдадим написание поздравления на аутсорс и они решат, что недостаточно повторить возраст дважды, нужно повторить 10 раз или даже 50 раз,
что тогда? Надеюсь вы уже поняли к чему я веду. Нам надо сделать так, чтобы возраст мы меняли только один раз и он сразу менялся везде. Для
этого можно использовать _переменные (variables)_.

Переменные объявляются с помощью ключевого слова `val`. Перепишем нашу программу, используя полученные знания.

```kotlin
fun main() {
    val age = 18

    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже ${age}!")
    println("${age} - самый прекрасный возраст.")
}
```

# Разбор на составляющие

Давайте разберем код по кусочкам:

```kotlin
val
```

* `val` - ключевое слово в Котлине, показывающее, что дальше будет название переменной

```kotlin
val age
```

* `age` - имя переменной

```kotlin
val age = 18
```

* `=` - операция присвоения. Мы говорим машине, что значение переменной `age` равно `18`. На "программистском" все это безобразие звучит
  так: в этой строчке мы объявляем переменную `age` и присваиваем ей значение `18`

```kotlin
println("Тебе уже ${age}!")
```

* Для того, чтобы машина поняла, что внутри текста находится переменная, ее нужно особым образом пометить. Для этого мы заключаем
  переменную `age` в конструкцию `${ }`

Теперь мы опять обрели полный контроль над нашей программой!
Перепишите код в [редактор](https://developer.android.com/training/kotlinplayground) и запустите программу, чтобы убедиться, что результат
остался тем же.

```kotlin
fun main() {
    val age = 18

    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже ${age}!")
    println("${age} - самый прекрасный возраст.")
}
```

# Меняем года на дни

Я не упомянул, что Вика любит большие числа? Нет? Ну так это чистая правда. Чем больше, тем лучше. Поэтому давайте будем писать не сколько
ей лет, а сколько дней.

Котлин поддерживает все основные математические операции: `+` сложение, `-` вычитание, `*` умножение, `/` деление. Чтобы получить из года
дни, помножим нашу переменную на `365` (да-да, високосный год и все такое, но не будем усложнять).

```kotlin
fun main() {
    val years = 18
    val days = years * 365

    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже ${days} дней!")
    println("${days} - самый прекрасный возраст.")
}
```

Обратите внимание, что для вычисления значения одних переменных, можно использовать значения других.

# Что еще можно хранить в переменных

У каждой переменной есть тип. Например, число (`10`) или строка (`"Вика"`). При объявлении переменной тип можно задать явно или же, если мы
сразу присваиваем значение, то Котлин сам поймет какой тип должен быть у переменной. Тип задается следующим образом:

```kotlin
val years: Int = 18
```

После имени переменной мы пишем `:` и тип переменной: в данном случае `Int`. Какие еще типы существуют мы поговорим позже. Сейчас давайте
перепишем наш код с явным объявлением типов

```kotlin
fun main() {
    val years: Int = 18
    val days: Int = years * 365

    println("С Днем Рождения!")
    println("Вика")
    println("Тебе уже ${days} дней!")
    println("${days} - самый прекрасный возраст.")
}
```

На данный момент нам будет достаточно узнать про еще один тип - `String` т.е. строки. Мы уже немного знакомы со стоками. Например, мы знаем,
что строки нужно объявлять в двойных кавычках `" "`.

Давайте теперь вынесем имя в переменную.

```kotlin
fun main() {
    val years: Int = 18
    val days: Int = years * 365

    val name: String = "Вика"

    println("С Днем Рождения!")
    println("$name")
    println("Тебе уже ${days} дней!")
    println("${days} - самый прекрасный возраст.")
}
```

Посмотрите внимательнее на эти 2 строки

```kotlin
val name: String = "Вика"

println("$name")
```

Подумайте, можно ли как-то упростить это выражение? Попробуйте дать ответ не смотря на решение.

<details>
<summary><b>Решение</b></summary>

Т.к. в функцию `println()` мы передаем только переменную, которая уже является строкой, то нет необходимости заключить ее в `${ }` и можно
переписать так

```kotlin
val name: String = "Вика"

println(name)
```

</details>

# Фабрика поздравлений

Обратимся к первому уроку и вспомним, что у нас очень много родственников и всем нужно посылать поздравления. Не хотелось бы каждый раз
переписывать поздравления. А нельзя ли организовать переиспользование, как мы сделали с переменными, только с куском кода? Правильно
мыслите, товарищи! Для этого будем использовать функции.

> В прошлом уроке мы узнали, что
> * Функция — это связанные инструкции, которые исполняют определенную задачу
> * Для объявления функций используется ключевое слово `fun`
> * Синтаксис для объявления функции: `fun name () {}`, где
>  * `name` - имя функции
>  * в круглых скобках `()` передаются аргументы
>  * в фигурных скобках `{}` находится тело функции (т.е. все инструкции относящиеся к этой функции)

Объявим свою функцию следующим образом:

```kotlin
fun printCongratulations(name: String, years: Int) {
    val days: Int = years * 365

    println("С Днем Рождения!")
    println(name)
    println("Тебе уже ${days} дней!")
    println("${days} - самый прекрасный возраст.")
}
```

По большому счету получилось та же самая функция `main` только с одним отличием - у нашей функции есть ~~железные~~ аргументы. Пристальнее
рассмотрим эту строчку

```kotlin
fun printCongratulations(name: String, years: Int)
```

* после слова `fun` идет название функции `printCongratulations`. По этому имени мы будем обращаться к нашей функции. Имя может быть любым,
  но очень желательно, чтобы имя передавало смысл функции. Если вспомнить курс школьной литературы, мы бы назвали это "говорящим" именем.
* `(name: String, years: Int)` - в круглых скобках мы перечисляем все аргументы функции: сначала пишем имя, а потом через двоеточие ее тип.
  Обратите внимание, что при объявлении аргумента указывать тип нужно обязательно, а вот слово `val` не нужно.

Финальная версия кода будет выглядеть так:

```kotlin
fun main() {
    printCongratulations("Вика", 18)

    printCongratulations("Игорь", 21)
}

fun printCongratulations(name: String, years: Int) {
    val days: Int = years * 365

    println("С Днем Рождения!")
    println(name)
    println("Тебе уже ${days} дней!")
    println("${days} - самый прекрасный возраст.")
}
```

1. Скопируйте код в редактор кода и запустите программу.
2. Должно вывестись сообщение с поздравлением сначала для Вики, затем для Игоря.

```
С Днем Рождения!
Вика
Тебе уже 6570 дней!
6570 - самый прекрасный возраст.
С Днем Рождения!
Игорь
Тебе уже 7665 дней!
7665 - самый прекрасный возраст.
```

Давайте разберем шаг за шагом, как работает наша программа:

1. Когда мы запускаем нашу программу, Котлин находит функцию `main()`, с которой и начнется выполнение кода.
2. Первая инструкция — вызов функции `printCongratulations()` с аргументами `"Вика"` и `"18"`.
3. Далее заходим внутрь функции `printCongratulations()` и печатаем 4 строки с переданными аргументами ( `"Вика"` и `"18"`).
4. После того, как отработала `printCongratulations()` мы возвращаемся в `main()` и выполняем следующую инструкцию — опять же
   вызов `printCongratulations()`, но уже с аргументами `"Игорь"` и `"21"`.
5. Опять заходим внутрь `printCongratulations()` и печатаем 4 строки с новыми аргументами ( `"Игорь"` и `"21"`).
6. Снова возвращаемся в `main()` - инструкций больше нет. Программа завершается

Фух! Вот такой вот полет мысли. На этом небольшом примере мы рассмотрели, как работают почти все программы. Основная идея следующая: весь
код разделен на функции и они по очереди вызывают друг друга, чтобы добиться желаемого результата.

> Обратите внимание как мы называем переменные и функции.
> Название начинается с маленькой буквы, а каждое новое слово в названии начинается с большой буквы.
> Вот несколько примеров: `dayOfWeek`, `activateRedButton`, `veryLongNameOnlyForExamplePurposes`.
> Этот метод именования называется camel case. Дальше мы встретим еще несколько таких правил.
> Эти правила существуют, чтобы разработчикам было легче (привычнее) читать чужой код.
> Сборник этих правил называется **Naming conventions**

# Возвращаемое значение

Функции могут возвращать значение или можно сказать результат своего выполнения. Например, у нас есть функция `add(a: Int, b: Int)`, которая
на вход принимает 2 числа и складывает их. Ее возвращаемое значение — это результат сложения этих двух чисел. Какой тип данных функция
вернет в качестве результата своего выполнения, мы указываем при ее объявлении:

```kotlin
fun add(a: Int, b: Int): Int {
    val result = a + b

    return result
}
```

* `fun add(a: Int, b: Int) : Int ` - после двоеточия указывается возвращаемый тип. В данном случае, при сложении двух чисел, мы также
  получаем число, поэтому возвращаемый тип `Int`.
* `return result` - ключевое слово `return` означает, что следующее за ним выражение и будет результатом функции. В данном случае
  переменная `result`
* если в функции указано, что она возвращает значение, то слово `return` __обязательно__ должно присутствовать

Можно упростить функцию:

```kotlin
fun add(a: Int, b: Int): Int {
    return a + b
}
```

Таким образом, после `return` может стоять любое выражение.

Предположим, нам нужно написать пару основных функций для приложения Калькулятор. Это могло бы выглядеть следующим образом:

```kotlin
fun main() {
    val m = multiply(2, 2)
    val s = subtract(5, 0)
}

fun multiply(a: Int, b: Int): Int {
    return a * b
}

fun subtract(a: Int, b: Int): Int {
    return a - b
} 
```

# Резюмируя

* Используйте `${ }` вокруг переменной, чтобы для вывода на экран брать значение переменной. Например, `println("Тебе уже ${years}")`.
* Ключевое слово `val` нужно для объявления переменных. Например, `val years = 18`.
* У функции может быть несколько аргументов, которые перечисляются через запятую. Например, `printBirthday(name: String, age: Int)`.
* Функция может вернуть значение. Для этого нужно объявить тип возвращаемого значения через двоеточие,
  например, `fun add(a: Int, b: Int) : Int` и внутри тела функции с помощью ключевого слова `return` обозначить, что именно будет
  результатом.

# Полезные ссылки

Официальная документация по Котлину

* [Объявление переменных](https://kotlinlang.org/docs/reference/basic-syntax.html#defining-variables)
* [Объявление функций](https://kotlinlang.org/docs/reference/basic-syntax.html#defining-functions)

# Practice makes perfect

__Задача 1:__ напишите цепочку вызовов функций глубиной 3. Каждая функция при вызове должна печатать свое название и вызывать следующую
функцию. Например, из `main()` мы вызываем функцию `a()`, которая печатает `a` и вызывает функцию `b()`. `b()` печатает `b` и вызывает `c()`
и т.д. Имена функций должны содержать минимум 2 слова (соблюдайте naming conversion).

__Дополнительное условие__: постарайтесь найти аналогию из реального мира, чтобы функции логично следовали одна за другой.
Например, `приготовитьУжин()`, `разогретьПлиту()` и т.д.

<details>
<summary><b>Решение</b></summary>

Один из вариантов решения выглядит так

```kotlin
fun main() {
    println("Starting from main!")

    studyWithFun()

    println("I am smart now!")
}

fun studyWithFun() {
    println("Study with fun")

    openAndroidBasics()
}

fun openAndroidBasics() {
    println("Open Android Basics")

    learnFirstLesson()
    learnSecondLesson()
}

fun learnFirstLesson() {
    println("Learn first lesson")
}

fun learnSecondLesson() {
    println("Learn second lesson")
}
```

</details>

---

__Задача 2:__ напишите функцию, которая принимает на вход число, высчитывает его квадрат и возвращает полученное значение в виде строки.
Например, если передали `2`, то функция должна вернуть `"4"`

__Подсказка:__ для создания строк мы используем двойные кавычки `" "`

<details>
<summary><b>Решение</b></summary>

Один из вариантов решения выглядит так

```kotlin
fun main() {
    println(squareToStr(10))
}

fun squareToStr(a: Int): String {
    val result = a * a

    return "${result}"
}

```

</details>
